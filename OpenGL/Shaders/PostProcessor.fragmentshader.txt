#version 330
in vec2 retTexCoords;

out vec4 FragColor;

uniform sampler2D sceneTexture;
uniform bool TintBlueEnabled = false;
uniform float Time = 0.0;
uniform float Frequency = 4.0;
uniform float Amplitude = 0.01;

const float offset = 1.0 / 300.0;

void main()
{
    vec2 texCoord = retTexCoords.st;
    
    // Apply wave distortion to create a unified wave effect across the entire scene
    // Use smaller frequency scale for smoother, less jerky motion
    float waveX = sin(texCoord.y * Frequency + Time) * Amplitude;
    float waveY = sin(texCoord.x * Frequency + Time * 0.7) * Amplitude * 0.5;
    
    texCoord.x += waveX;
    texCoord.y += waveY;
    
    vec3 col = vec3(texture(sceneTexture, texCoord));
    
    // Apply tint blue effect if enabled
    if (TintBlueEnabled)
    {
        col.r = col.r / 2.0;
        col.g = col.g / 2.0;
        // col.b remains unchanged
    }

    FragColor = vec4(col, 1.0);
}
